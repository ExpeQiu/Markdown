# 测试计划

## 1. 测试概述

本测试计划旨在确保在线Markdown编辑工具的各项功能按照需求文档中的描述正常工作，提供流畅、稳定的用户体验。测试范围包括功能测试、界面测试、性能测试和兼容性测试等方面。

### 1.1 测试目标
1. 验证所有核心功能符合需求文档中的描述
2. 确保用户界面符合设计规范
3. 验证系统在各种浏览器环境下的兼容性
4. 评估系统性能，确保满足非功能性需求中的性能指标
5. 确保无严重缺陷和错误

### 1.2 测试范围
- Markdown编辑与预览功能
- 主题/样式应用和自定义CSS功能
- 导出功能（PNG和PDF）
- 用户界面和交互体验
- 跨浏览器兼容性
- 性能和响应时间

### 1.3 测试环境
- **操作系统**：Windows 11, macOS Monterey, Ubuntu 22.04
- **浏览器**：Chrome (最新版), Firefox (最新版), Safari (最新版), Edge (最新版)
- **设备**：桌面电脑、笔记本电脑
- **屏幕分辨率**：1920x1080, 2560x1440, 3840x2160
- **网络环境**：高速网络、标准网络

## 2. 测试策略

### 2.1 测试类型
1. **单元测试**：测试各个功能模块的独立性能
2. **集成测试**：测试模块间的交互
3. **系统测试**：测试整个系统的功能和性能
4. **用户界面测试**：测试UI的外观和交互
5. **兼容性测试**：测试在不同浏览器和设备上的表现
6. **性能测试**：测试系统在不同负载下的响应时间和资源使用

### 2.2 测试方法
1. **自动化测试**：使用Jest进行单元测试，使用Cypress进行端到端测试
2. **手动测试**：由测试人员按照测试用例手动验证功能和用户体验
3. **探索性测试**：不按预设脚本进行，以发现潜在问题

### 2.3 测试工具
- **单元测试**：Jest, React Testing Library
- **端到端测试**：Cypress
- **性能测试**：Lighthouse, WebPageTest
- **浏览器兼容性测试**：BrowserStack

## 3. 测试计划执行

### 3.1 测试阶段和时间安排
1. **单元测试**：开发过程中持续进行
2. **集成测试**：主要功能模块完成后进行
3. **系统测试**：所有功能开发完成后进行
4. **用户界面测试**：UI开发完成后进行
5. **兼容性测试**：系统测试后进行
6. **性能测试**：系统功能稳定后进行
7. **回归测试**：每次修复问题后进行

### 3.2 进入和退出标准
- **进入标准**：
  - 功能开发完成
  - 单元测试通过率达到90%以上
  - 无阻塞性缺陷
- **退出标准**：
  - 所有高优先级测试用例执行通过
  - 所有严重和高优先级缺陷已修复
  - 兼容性测试在目标浏览器上通过
  - 性能测试满足指标要求

### 3.3 缺陷管理
1. 缺陷严重程度分类：
   - **致命**：导致系统崩溃或数据丢失
   - **严重**：主要功能不可用
   - **一般**：功能可用但存在问题
   - **轻微**：次要问题，不影响功能使用
2. 缺陷优先级：
   - **高**：需要立即修复
   - **中**：下一轮迭代修复
   - **低**：可以延后修复

## 4. 测试用例

### 4.1 功能测试用例

#### 4.1.1 Markdown编辑功能

| 测试ID | 测试内容 | 预期结果 | 优先级 |
|--------|---------|---------|-------|
| F-ED-001 | 输入基本Markdown语法（标题、列表、粗体、斜体） | 内容正确显示在编辑区，预览区正确渲染Markdown | 高 |
| F-ED-002 | 输入链接和图片Markdown语法 | 预览区中链接可点击，图片正确显示 | 高 |
| F-ED-003 | 输入代码块和行内代码 | 代码块和行内代码在预览区有正确的格式和语法高亮 | 高 |
| F-ED-004 | 输入表格Markdown语法 | 表格在预览区正确渲染 | 中 |
| F-ED-005 | 输入引用块Markdown语法 | 引用块在预览区正确渲染 | 中 |
| F-ED-006 | 通过工具栏按钮插入Markdown语法 | 在光标位置或选中文本处正确插入相应Markdown语法 | 高 |
| F-ED-007 | 复制粘贴文本到编辑区 | 粘贴的文本正确显示并保持格式 | 中 |
| F-ED-008 | 长文档编辑（5000字以上） | 编辑和预览响应迅速，无明显延迟 | 高 |

#### 4.1.2 主题与样式功能

| 测试ID | 测试内容 | 预期结果 | 优先级 |
|--------|---------|---------|-------|
| F-ST-001 | 切换预设主题 | 预览区样式立即更新为选中的主题 | 高 |
| F-ST-002 | 输入有效的自定义CSS | 预览区样式按照自定义CSS更新 | 高 |
| F-ST-003 | 输入无效的自定义CSS | 显示错误提示，不应用无效CSS | 中 |
| F-ST-004 | 启用/禁用自定义CSS | 自定义CSS的应用状态正确切换 | 中 |
| F-ST-005 | 主题与自定义CSS组合使用 | 自定义CSS正确覆盖主题中的相应样式 | 中 |

#### 4.1.3 导出功能

| 测试ID | 测试内容 | 预期结果 | 优先级 |
|--------|---------|---------|-------|
| F-EX-001 | 导出为PNG（短文档） | 成功生成PNG图片，内容与预览一致 | 高 |
| F-EX-002 | 导出为PNG（长文档） | 成功生成完整的PNG图片，包含所有内容 | 高 |
| F-EX-003 | 导出为PDF（A4纵向） | 成功生成PDF，格式为A4纵向，内容与预览一致 | 高 |
| F-EX-004 | 导出为PDF（A4横向） | 成功生成PDF，格式为A4横向，内容与预览一致 | 中 |
| F-EX-005 | 导出包含图片的文档 | 导出文件中图片正确显示 | 高 |
| F-EX-006 | 导出包含代码块的文档 | 导出文件中代码块格式和高亮保持一致 | 中 |
| F-EX-007 | 导出时取消操作 | 导出过程被取消，不生成文件 | 低 |

### 4.2 界面测试用例

| 测试ID | 测试内容 | 预期结果 | 优先级 |
|--------|---------|---------|-------|
| U-UI-001 | 检查页面布局在标准屏幕分辨率下的显示 | 布局符合设计规范，无溢出或错位 | 高 |
| U-UI-002 | 检查页面布局在高分辨率屏幕下的显示 | 布局适应高分辨率，元素比例协调 | 中 |
| U-UI-003 | 页面元素对鼠标悬停、点击等事件的响应 | 按钮、链接等元素有明确的状态反馈 | 高 |
| U-UI-004 | 模态框的显示和关闭 | 模态框居中显示，背景半透明，可通过按钮或点击外部区域关闭 | 中 |
| U-UI-005 | 检查字体渲染 | 文本清晰可读，不同字号和字重正确显示 | 中 |

### 4.3 性能测试用例

| 测试ID | 测试内容 | 预期结果 | 优先级 |
|--------|---------|---------|-------|
| P-PF-001 | 页面加载时间 | 首屏渲染时间 < 2秒 | 高 |
| P-PF-002 | Markdown解析和预览更新响应时间 | 输入后预览更新时间 < 500ms | 高 |
| P-PF-003 | 主题切换响应时间 | 主题切换后预览更新时间 < 1秒 | 中 |
| P-PF-004 | 长文档（10000字以上）编辑时的性能 | 编辑和预览无明显卡顿 | 高 |
| P-PF-005 | 导出功能执行时间 | PDF导出时间 < 30秒（对于5000字文档） | 中 |
| P-PF-006 | 内存使用情况 | 长时间使用后内存占用稳定，无明显内存泄漏 | 高 |

### 4.4 兼容性测试用例

| 测试ID | 测试内容 | 预期结果 | 优先级 |
|--------|---------|---------|-------|
| C-CM-001 | Chrome浏览器兼容性 | 所有功能正常工作，界面正确显示 | 高 |
| C-CM-002 | Firefox浏览器兼容性 | 所有功能正常工作，界面正确显示 | 高 |
| C-CM-003 | Safari浏览器兼容性 | 所有功能正常工作，界面正确显示 | 高 |
| C-CM-004 | Edge浏览器兼容性 | 所有功能正常工作，界面正确显示 | 高 |
| C-CM-005 | 不同操作系统上的兼容性（Windows/macOS/Linux） | 功能和界面在不同操作系统上一致 | 中 |

## 5. 自动化测试

### 5.1 单元测试

#### 5.1.1 组件测试
```javascript
// 示例：测试EditorPane组件
describe('EditorPane', () => {
  test('应正确渲染编辑区和工具栏', () => {
    // 测试代码
  });
  
  test('输入文本应更新内部状态', () => {
    // 测试代码
  });
  
  test('工具栏按钮点击应插入正确的Markdown语法', () => {
    // 测试代码
  });
});

// 示例：测试PreviewPane组件
describe('PreviewPane', () => {
  test('应正确渲染Markdown内容', () => {
    // 测试代码
  });
  
  test('应正确应用主题样式', () => {
    // 测试代码
  });
});
```

#### 5.1.2 工具函数测试
```javascript
// 示例：测试Markdown解析函数
describe('parseMarkdown', () => {
  test('应正确解析标题', () => {
    // 测试代码
  });
  
  test('应正确解析列表', () => {
    // 测试代码
  });
  
  test('应正确解析代码块并应用语法高亮', () => {
    // 测试代码
  });
});

// 示例：测试导出功能
describe('exportUtils', () => {
  test('应正确生成PNG图片', () => {
    // 测试代码
  });
  
  test('应正确生成PDF文档', () => {
    // 测试代码
  });
});
```

### 5.2 端到端测试

```javascript
// 示例：基本编辑和预览功能测试
describe('Markdown编辑和预览', () => {
  beforeEach(() => {
    cy.visit('/');
  });
  
  it('应能输入Markdown并查看预览', () => {
    cy.get('#markdown-input')
      .type('# 测试标题\n\n这是测试内容');
    
    cy.get('.preview-area')
      .find('h1')
      .should('contain.text', '测试标题');
    
    cy.get('.preview-area')
      .find('p')
      .should('contain.text', '这是测试内容');
  });
});

// 示例：主题切换测试
describe('主题切换功能', () => {
  beforeEach(() => {
    cy.visit('/');
  });
  
  it('应能切换主题并立即生效', () => {
    // 选择学术论文主题
    cy.get('.theme-selector')
      .contains('学术论文')
      .click();
    
    // 验证主题已应用
    cy.get('.preview-area')
      .should('have.class', 'theme-academic');
  });
});

// 示例：导出功能测试
describe('导出功能', () => {
  beforeEach(() => {
    cy.visit('/');
    cy.get('#markdown-input')
      .type('# 测试导出\n\n这是用于测试导出功能的内容');
  });
  
  it('应能成功导出PDF文件', () => {
    cy.get('.export-button').click();
    cy.get('.export-modal').should('be.visible');
    cy.get('.export-modal').contains('PDF').click();
    cy.get('.export-modal').contains('确认导出').click();
    
    // 验证下载是否开始（注：Cypress不能直接验证下载完成）
    cy.get('.export-success-message').should('be.visible');
  });
});
```

## 6. 测试报告

### 6.1 测试结果摘要模板
```
测试执行日期：[日期]
测试版本：[版本号]
测试环境：[环境描述]

测试用例执行统计：
- 总计测试用例：XX个
- 通过：XX个 (XX%)
- 失败：XX个 (XX%)
- 阻塞：XX个 (XX%)
- 未执行：XX个 (XX%)

缺陷统计：
- 总计缺陷：XX个
- 严重：XX个
- 高：XX个
- 中：XX个
- 低：XX个

测试结论：
[总体评价和建议]
```

### 6.2 缺陷报告模板
```
缺陷ID：[ID]
报告日期：[日期]
报告人：[姓名]
缺陷标题：[简短描述]
严重程度：[致命/严重/一般/轻微]
优先级：[高/中/低]
状态：[新建/已分配/已修复/已验证/已关闭]

缺陷描述：
[详细描述问题]

重现步骤：
1. [步骤1]
2. [步骤2]
3. [步骤3]

期望结果：
[期望看到的行为]

实际结果：
[实际看到的行为]

环境信息：
- 浏览器：[类型和版本]
- 操作系统：[类型和版本]
- 屏幕分辨率：[分辨率]

附件：
[截图或视频链接]

备注：
[其他相关信息]
```

## 7. 风险与应对措施

| 风险 | 可能性 | 影响 | 应对措施 |
|------|-------|------|---------|
| 浏览器兼容性问题 | 中 | 高 | 从开发初期就关注跨浏览器兼容性，使用兼容性良好的库，进行全面的跨浏览器测试 |
| 大文档性能问题 | 高 | 中 | 实施性能优化措施，如防抖、虚拟滚动等，进行性能基准测试 |
| 导出功能不稳定 | 中 | 高 | 增加导出过程中的错误处理，提供导出进度和状态反馈，为不同场景编写专项测试 |
| 自定义CSS安全风险 | 低 | 高 | 实施CSS校验和沙箱机制，限制可能有害的CSS属性 |
| 用户期望与实际功能不匹配 | 中 | 中 | 明确文档需求和限制，进行用户测试和反馈收集 |

## 8. 测试完成标准

测试完成并认为产品可以发布的标准：

1. 所有高优先级测试用例已执行并通过
2. 所有严重和高优先级缺陷已修复并验证
3. 中等优先级缺陷有明确的解决计划
4. 产品在所有目标浏览器上功能正常
5. 性能测试指标满足要求
6. 文档完整，包括用户指南和已知问题列表

## 9. 测试资源和责任

### 9.1 测试团队
- 测试负责人：负责测试计划制定和执行协调
- 功能测试员：负责功能和UI测试
- 自动化测试工程师：负责编写和维护自动化测试脚本
- 性能测试工程师：负责性能和负载测试

### 9.2 开发团队职责
- 修复测试中发现的缺陷
- 参与代码审查和单元测试编写
- 协助分析复杂问题

### 9.3 产品经理职责
- 澄清需求和验收标准
- 参与用户验收测试
- 确定缺陷修复优先级

## 10. 测试完成后的活动

1. 测试总结报告编写
2. 经验教训总结
3. 测试资产归档（测试用例、自动化脚本等）
4. 未修复缺陷添加到已知问题列表
5. 为下一版本测试提出改进建议 